{"ast":null,"code":"import _slicedToArray from\"/home/toufiq/go/src/github.com/play-around/presenter/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import client from'./client';import'./App.css';export default function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),slideIndex=_useState4[0],setSlideIndex=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),slides=_useState6[0],setSlides=_useState6[1];// slide names\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isPresenter=_useState8[0],setIsPresenter=_useState8[1];var DO_PRESENT=getUrlParam('present').toLowerCase()==='yes';var handleLogin=function handleLogin(e){if(!client.isConnected())return;e&&e.preventDefault();client.login(password,function(err,admin,slides,index){setIsPresenter(!password?null:admin);setSlides(slides||[]);console.log({slides:slides,index:index,admin:admin});setSlideIndex(index);});};useEffect(function(){handleLogin();client.onSlideIndex(function(index){setSlideIndex(index);console.log('Slide changed',index);});client.onReconnect(function(){if(!client.isConnected())return;isPresenter&&password&&handleLogin();client.getCurrentSlide(function(index){return setSlideIndex(index);});});var handleKeyPress=function handleKeyPress(e){if(!isPresenter)return;// control slide on arrow key press and page up/down key press\ne=e||window.event;var index=slideIndex;switch(e.keyCode){case 35:// End key\nindex=slides.length-1;// go to last slide\nbreak;case 36:// Home key\nindex=0;// go to first slide\nbreak;case 38:// up arrow\ncase 37:// left arrow\nindex=slideIndex-1;// go to previous slide\nbreak;case 39:// right arrow\ncase 40:// down arrow\nindex=slideIndex+1;// go to next slide\nbreak;default:// console.log({ keyCode: e.keyCode })\nbreak;}if(index<0||index>=slides.length)return;client.setCurrentSlide(index,function(err){console.log('setCurrentSlide',{err:err});});};document.onkeydown=handleKeyPress;return function(){};},[slideIndex,isPresenter]);if(DO_PRESENT&&!isPresenter)return/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"h3\",null,\"Please enter password to login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleLogin},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"Enter password\",style:styles.input})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{style:styles.button,onClick:handleLogin},\"Login as presenter\"),/*#__PURE__*/React.createElement(\"button\",{style:styles.button,onClick:function onClick(){return window.location.href='?present=no';}},\"View Only\")));return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,slideIndex+1,\"/\",slides.length),(slides||[]).map(function(slide,index){return/*#__PURE__*/React.createElement(\"img\",{src:\"./slides/\".concat(slide),style:{display:slideIndex!==index?'none':'block',width:'100%'},alt:slide});}));}var styles={button:{background:'#dadada',cursor:'pointer',fontWeight:'bold',padding:'10px 15px'},input:{padding:'10px 15px',borderRadius:3,border:'1px solid grey'}};// getUrlParam reads the URL parameters\n//\n// Params:\n// @name    string: (optional) if supplied will return a specific paramenter as string.\n//                  Otherwise, will return an object containing all the URL parameters with respective values.\n//\n// returns  string/object\nfunction getUrlParam(name){var params={};var regex=/[?&]+([^=&]+)=([^&]*)/gi;window.location.href.replace(regex,function(_,key,value){return params[key]=value;});return name?params[name]||'':params;}","map":{"version":3,"sources":["/home/toufiq/go/src/github.com/play-around/presenter/src/App.js"],"names":["React","useState","useEffect","client","App","password","setPassword","slideIndex","setSlideIndex","slides","setSlides","isPresenter","setIsPresenter","DO_PRESENT","getUrlParam","toLowerCase","handleLogin","e","isConnected","preventDefault","login","err","admin","index","console","log","onSlideIndex","onReconnect","getCurrentSlide","handleKeyPress","window","event","keyCode","length","setCurrentSlide","document","onkeydown","textAlign","target","value","styles","input","button","location","href","map","slide","src","style","display","width","alt","background","cursor","fontWeight","padding","borderRadius","border","name","params","regex","replace","_","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport client from './client'\nimport './App.css'\n\nexport default function App() {\n\tconst [password, setPassword] = useState('')\n\tconst [slideIndex, setSlideIndex] = useState(0)\n\tconst [slides, setSlides] = useState([]) // slide names\n\tconst [isPresenter, setIsPresenter] = useState(false)\n\tconst DO_PRESENT = getUrlParam('present').toLowerCase() === 'yes'\n\tconst handleLogin = e => {\n\t\tif (!client.isConnected()) return\n\t\te && e.preventDefault()\n\t\tclient.login(password, (err, admin, slides, index) => {\n\t\t\tsetIsPresenter(!password ? null : admin)\n\t\t\tsetSlides(slides || [])\n\t\t\tconsole.log({ slides, index, admin })\n\t\t\tsetSlideIndex(index)\n\t\t})\n\t}\n\n\tuseEffect(() => {\n\t\thandleLogin()\n\t\tclient.onSlideIndex((index) => {\n\t\t\tsetSlideIndex(index)\n\t\t\tconsole.log('Slide changed', index)\n\t\t})\n\n\t\tclient.onReconnect(() => {\n\t\t\tif (!client.isConnected()) return\n\t\t\tisPresenter && password && handleLogin()\n\t\t\tclient.getCurrentSlide(index => setSlideIndex(index))\n\t\t})\n\n\t\tconst handleKeyPress = e => {\n\t\t\tif (!isPresenter) return\n\t\t\t// control slide on arrow key press and page up/down key press\n\t\t\te = e || window.event;\n\t\t\tlet index = slideIndex\n\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase 35: // End key\n\t\t\t\t\tindex = slides.length - 1 // go to last slide\n\t\t\t\t\tbreak\n\t\t\t\tcase 36: // Home key\n\t\t\t\t\tindex = 0 // go to first slide\n\t\t\t\t\tbreak\n\t\t\t\tcase 38: // up arrow\n\t\t\t\tcase 37: // left arrow\n\t\t\t\t\tindex = slideIndex - 1 // go to previous slide\n\t\t\t\t\tbreak\n\t\t\t\tcase 39: // right arrow\n\t\t\t\tcase 40: // down arrow\n\t\t\t\t\tindex = slideIndex + 1 // go to next slide\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\t// console.log({ keyCode: e.keyCode })\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (index < 0 || index >= slides.length) return\n\t\t\tclient.setCurrentSlide(index, (err) => {\n\t\t\t\tconsole.log('setCurrentSlide', { err })\n\t\t\t})\n\t\t}\n\t\tdocument.onkeydown = handleKeyPress\n\t\treturn () => { }\n\t}, [slideIndex, isPresenter])\n\n\tif (DO_PRESENT && !isPresenter) return (\n\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t<h3>Please enter password to login</h3>\n\t\t\t<form onSubmit={handleLogin}>\n\t\t\t\t<input\n\t\t\t\t\ttype='password'\n\t\t\t\t\tonChange={e => setPassword(e.target.value)}\n\t\t\t\t\tplaceholder='Enter password'\n\t\t\t\t\tstyle={styles.input}\n\t\t\t\t/>\n\t\t\t</form>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\tstyle={styles.button}\n\t\t\t\t\tonClick={handleLogin}\n\t\t\t\t>\n\t\t\t\t\tLogin as presenter\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tstyle={styles.button}\n\t\t\t\t\tonClick={() => window.location.href = '?present=no'}\n\t\t\t\t>\n\t\t\t\t\tView Only\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t)\n\treturn (\n\t\t<div>\n\t\t\t<div>\n\t\t\t\t{slideIndex + 1}/{slides.length}\n\t\t\t</div>\n\t\t\t{(slides || []).map((slide, index) => (\n\t\t\t\t<img {...{\n\t\t\t\t\tsrc: `./slides/${slide}`,\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tdisplay: slideIndex !== index ? 'none' : 'block',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t},\n\t\t\t\t\talt: slide,\n\t\t\t\t}} />\n\t\t\t))}\n\t\t</div>\n\t)\n}\n\nconst styles = {\n\tbutton: {\n\t\tbackground: '#dadada',\n\t\tcursor: 'pointer',\n\t\tfontWeight: 'bold',\n\t\tpadding: '10px 15px',\n\t},\n\tinput: {\n\t\tpadding: '10px 15px',\n\t\tborderRadius: 3,\n\t\tborder: '1px solid grey'\n\t},\n}\n\n// getUrlParam reads the URL parameters\n//\n// Params:\n// @name    string: (optional) if supplied will return a specific paramenter as string.\n//                  Otherwise, will return an object containing all the URL parameters with respective values.\n//\n// returns  string/object\nfunction getUrlParam(name) {\n\tconst params = {}\n\tconst regex = /[?&]+([^=&]+)=([^&]*)/gi\n\twindow.location.href.replace(regex, (_, key, value) => params[key] = value)\n\treturn name ? params[name] || '' : params\n}"]},"metadata":{},"sourceType":"module"}