{"ast":null,"code":"var _jsxFileName = \"/home/toufiq/go/src/github.com/play-around/presenter/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport client from './client';\nimport './App.css';\nconst DO_PRESENT = getUrlParam('present').toLowerCase() === 'yes';\nexport default function App() {\n  const [password, setPassword] = useState(''); //localStorage.getItem('password')\n\n  const [slideIndex, setSlideIndex] = useState(1);\n  const [slides, setSlides] = useState([]); // slide names\n\n  const [isPresenter, setIsPresenter] = useState(null);\n\n  const handleKeyPress = e => {\n    // control slide on arrow key press and page up/down key press\n    e = e || window.event;\n    let index = slideIndex;\n    console.log('key pressed', e.keyCode);\n\n    switch (e.keyCode) {\n      case 35:\n        // End key\n        // go to last slide\n        break;\n\n      case 36:\n        // Home key\n        index = 0; // go to first slide\n\n        break;\n\n      case 38: // up arrow\n\n      case 37:\n        // left arrow\n        index = slideIndex - 1; // go to previous slide\n\n        break;\n\n      case 39: // right arrow\n\n      case 40:\n        // down arrow\n        index = slideIndex + 1; // go to next slide\n\n        break;\n\n      default:\n        // console.log({ keyCode: e.keyCode })\n        break;\n    }\n\n    if (index < 0 || index >= slides.length) return;\n    client.setCurrentSlide(index, () => {});\n  };\n\n  useEffect(() => {\n    client.onSlideIndex(index => setSlideIndex(index) | console.log('Index changed', index));\n    return () => {};\n  }, [slideIndex]);\n\n  if (DO_PRESENT && isPresenter === null) {\n    const handleLogin = () => client.login(password, (admin, slides) => {\n      setSlides(slides);\n      setIsPresenter(!!admin);\n      console.log({\n        admin,\n        slides\n      });\n      if (!admin) localStorage.setItem('password', password); // if (!!document.onkeydown) return\n\n      document.onkeydown = handleKeyPress; // // auto relogin\n      // client.reconnect(() => handleLogin())\n    });\n\n    if (!localStorage.getItem('password')) return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 5\n      }\n    }, \"Please enter password to login\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleLogin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      onChange: e => setPassword(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 6\n      }\n    })));\n    handleLogin();\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 3\n    }\n  }, password, slides, /*#__PURE__*/React.createElement(\"img\", Object.assign({\n    src: `./slides/${slideIndex}.png`,\n    style: {\n      width: '100%'\n    },\n    alt: ''\n  }, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 4\n    }\n  })));\n} // getUrlParam reads the URL parameters\n//\n// Params:\n// @name    string: (optional) if supplied will return a specific paramenter as string.\n//                  Otherwise, will return an object containing all the URL parameters with respective values.\n//\n// returns  string/object\n\nfunction getUrlParam(name) {\n  const params = {};\n  const regex = /[?&]+([^=&]+)=([^&]*)/gi;\n  window.location.href.replace(regex, (_, key, value) => params[key] = value);\n  return name ? params[name] || '' : params;\n}","map":{"version":3,"sources":["/home/toufiq/go/src/github.com/play-around/presenter/src/App.js"],"names":["React","useState","useEffect","client","DO_PRESENT","getUrlParam","toLowerCase","App","password","setPassword","slideIndex","setSlideIndex","slides","setSlides","isPresenter","setIsPresenter","handleKeyPress","e","window","event","index","console","log","keyCode","length","setCurrentSlide","onSlideIndex","handleLogin","login","admin","localStorage","setItem","document","onkeydown","getItem","target","value","src","style","width","alt","name","params","regex","location","href","replace","_","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport client from './client'\nimport './App.css'\n\nconst DO_PRESENT = getUrlParam('present').toLowerCase() === 'yes'\nexport default function App() {\n\tconst [password, setPassword] = useState('')//localStorage.getItem('password')\n\tconst [slideIndex, setSlideIndex] = useState(1)\n\tconst [slides, setSlides] = useState([]) // slide names\n\tconst [isPresenter, setIsPresenter] = useState(null)\n\tconst handleKeyPress = e => {\n\t\t// control slide on arrow key press and page up/down key press\n\t\te = e || window.event;\n\t\tlet index = slideIndex\n\t\tconsole.log('key pressed', e.keyCode)\n\t\tswitch (e.keyCode) {\n\t\t\tcase 35: // End key\n\t\t\t\t// go to last slide\n\t\t\t\tbreak\n\t\t\tcase 36: // Home key\n\t\t\t\tindex = 0 // go to first slide\n\t\t\t\tbreak\n\t\t\tcase 38: // up arrow\n\t\t\tcase 37: // left arrow\n\t\t\t\tindex = slideIndex - 1 // go to previous slide\n\t\t\t\tbreak\n\t\t\tcase 39: // right arrow\n\t\t\tcase 40: // down arrow\n\t\t\t\tindex = slideIndex + 1 // go to next slide\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\t// console.log({ keyCode: e.keyCode })\n\t\t\t\tbreak\n\t\t}\n\t\tif (index < 0 || index >= slides.length) return\n\t\tclient.setCurrentSlide(index, () => { })\n\t}\n\n\tuseEffect(() => {\n\t\tclient.onSlideIndex(index => setSlideIndex(index) | console.log('Index changed', index))\n\n\t\treturn () => { }\n\t}, [slideIndex])\n\n\tif (DO_PRESENT && isPresenter === null) {\n\t\tconst handleLogin = () => client.login(password, (admin, slides) => {\n\t\t\tsetSlides(slides)\n\t\t\tsetIsPresenter(!!admin)\n\t\t\tconsole.log({ admin, slides })\n\t\t\tif (!admin) localStorage.setItem('password', password)\n\t\t\t// if (!!document.onkeydown) return\n\t\t\tdocument.onkeydown = handleKeyPress\n\t\t\t// // auto relogin\n\t\t\t// client.reconnect(() => handleLogin())\n\t\t})\n\t\tif (!localStorage.getItem('password')) return (\n\t\t\t<div>\n\t\t\t\t<h3>Please enter password to login</h3>\n\t\t\t\t<form onSubmit={handleLogin}>\n\t\t\t\t\t<input type='password' onChange={e => setPassword(e.target.value)} />\n\t\t\t\t</form>\n\n\t\t\t</div>\n\t\t)\n\t\thandleLogin()\n\t}\n\treturn (\n\t\t<div>\n\t\t\t{password}\n\t\t\t{slides}\n\t\t\t<img {...{\n\t\t\t\tsrc: `./slides/${slideIndex}.png`,\n\t\t\t\tstyle: { width: '100%' },\n\t\t\t\talt: '',\n\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n\n// getUrlParam reads the URL parameters\n//\n// Params:\n// @name    string: (optional) if supplied will return a specific paramenter as string.\n//                  Otherwise, will return an object containing all the URL parameters with respective values.\n//\n// returns  string/object\nfunction getUrlParam(name) {\n\tconst params = {}\n\tconst regex = /[?&]+([^=&]+)=([^&]*)/gi\n\twindow.location.href.replace(regex, (_, key, value) => params[key] = value)\n\treturn name ? params[name] || '' : params\n}"]},"metadata":{},"sourceType":"module"}