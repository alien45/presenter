{"ast":null,"code":"import _slicedToArray from\"/home/toufiq/go/src/github.com/play-around/presenter/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import client from'./client';import'./App.css';var DO_PRESENT=getUrlParam('present').toLowerCase()==='yes';export default function App(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPassword=_useState2[1];//localStorage.getItem('password')\nvar _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),slideIndex=_useState4[0],setSlideIndex=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),slides=_useState6[0],setSlides=_useState6[1];// slide names\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),isPresenter=_useState8[0],setIsPresenter=_useState8[1];var handleKeyPress=function handleKeyPress(e){// control slide on arrow key press and page up/down key press\ne=e||window.event;var index=slideIndex;console.log('key pressed',e.keyCode);switch(e.keyCode){case 35:// End key\n// go to last slide\nbreak;case 36:// Home key\nindex=0;// go to first slide\nbreak;case 38:// up arrow\ncase 37:// left arrow\nindex=slideIndex-1;// go to previous slide\nbreak;case 39:// right arrow\ncase 40:// down arrow\nindex=slideIndex+1;// go to next slide\nbreak;default:// console.log({ keyCode: e.keyCode })\nbreak;}if(index<0||index>=slides.length)return;client.setCurrentSlide(index,function(){});};useEffect(function(){client.onSlideIndex(function(index){return setSlideIndex(index)|console.log('Index changed',index);});return function(){};},[slideIndex]);if(DO_PRESENT&&isPresenter===null){var handleLogin=function handleLogin(e){e.preventDefault();e.stopPropagation();client.login(password,function(admin,slides){console.log('handle login');setSlides(slides);setIsPresenter(!!admin);console.log({admin:admin,slides:slides});if(!admin)localStorage.setItem('password',password);// if (!!document.onkeydown) return\ndocument.onkeydown=handleKeyPress;// // auto relogin\n// client.reconnect(() => handleLogin())\n});};//localStorage.getItem('password')\nif(!isPresenter)return/*#__PURE__*/React.createElement(\"div\",{style:{textAlign:'center'}},/*#__PURE__*/React.createElement(\"h3\",null,\"Please enter password to login\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleLogin},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"Enter password\",style:{padding:'10px 15px',borderRadius:3,border:'1px solid grey'}}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{style:styles.button,onClick:handleLogin},\"Login as presenter\"),/*#__PURE__*/React.createElement(\"button\",{style:styles.button,onClick:function onClick(e){return e.preventDefault()|setIsPresenter(false);}},\"View Only\"))));handleLogin();}return/*#__PURE__*/React.createElement(\"div\",null,password,slides,/*#__PURE__*/React.createElement(\"img\",{src:\"./slides/\".concat(slideIndex,\".png\"),style:{width:'100%'},alt:''}));}var styles={button:{background:'#dadada',cursor:'pointer',fontWeight:'bold',padding:'10px 15px'}};// getUrlParam reads the URL parameters\n//\n// Params:\n// @name    string: (optional) if supplied will return a specific paramenter as string.\n//                  Otherwise, will return an object containing all the URL parameters with respective values.\n//\n// returns  string/object\nfunction getUrlParam(name){var params={};var regex=/[?&]+([^=&]+)=([^&]*)/gi;window.location.href.replace(regex,function(_,key,value){return params[key]=value;});return name?params[name]||'':params;}","map":{"version":3,"sources":["/home/toufiq/go/src/github.com/play-around/presenter/src/App.js"],"names":["React","useState","useEffect","client","DO_PRESENT","getUrlParam","toLowerCase","App","password","setPassword","slideIndex","setSlideIndex","slides","setSlides","isPresenter","setIsPresenter","handleKeyPress","e","window","event","index","console","log","keyCode","length","setCurrentSlide","onSlideIndex","handleLogin","preventDefault","stopPropagation","login","admin","localStorage","setItem","document","onkeydown","textAlign","target","value","padding","borderRadius","border","styles","button","src","style","width","alt","background","cursor","fontWeight","name","params","regex","location","href","replace","_","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport client from './client'\nimport './App.css'\n\nconst DO_PRESENT = getUrlParam('present').toLowerCase() === 'yes'\nexport default function App() {\n\tconst [password, setPassword] = useState('')//localStorage.getItem('password')\n\tconst [slideIndex, setSlideIndex] = useState(1)\n\tconst [slides, setSlides] = useState([]) // slide names\n\tconst [isPresenter, setIsPresenter] = useState(null)\n\tconst handleKeyPress = e => {\n\t\t// control slide on arrow key press and page up/down key press\n\t\te = e || window.event;\n\t\tlet index = slideIndex\n\t\tconsole.log('key pressed', e.keyCode)\n\t\tswitch (e.keyCode) {\n\t\t\tcase 35: // End key\n\t\t\t\t// go to last slide\n\t\t\t\tbreak\n\t\t\tcase 36: // Home key\n\t\t\t\tindex = 0 // go to first slide\n\t\t\t\tbreak\n\t\t\tcase 38: // up arrow\n\t\t\tcase 37: // left arrow\n\t\t\t\tindex = slideIndex - 1 // go to previous slide\n\t\t\t\tbreak\n\t\t\tcase 39: // right arrow\n\t\t\tcase 40: // down arrow\n\t\t\t\tindex = slideIndex + 1 // go to next slide\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\t// console.log({ keyCode: e.keyCode })\n\t\t\t\tbreak\n\t\t}\n\t\tif (index < 0 || index >= slides.length) return\n\t\tclient.setCurrentSlide(index, () => { })\n\t}\n\n\tuseEffect(() => {\n\t\tclient.onSlideIndex(index => setSlideIndex(index) | console.log('Index changed', index))\n\n\t\treturn () => { }\n\t}, [slideIndex])\n\n\tif (DO_PRESENT && isPresenter === null) {\n\t\tconst handleLogin = e => {\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t\tclient.login(password, (admin, slides) => {\n\t\t\t\tconsole.log('handle login')\n\t\t\t\tsetSlides(slides)\n\t\t\t\tsetIsPresenter(!!admin)\n\t\t\t\tconsole.log({ admin, slides })\n\t\t\t\tif (!admin) localStorage.setItem('password', password)\n\t\t\t\t// if (!!document.onkeydown) return\n\t\t\t\tdocument.onkeydown = handleKeyPress\n\t\t\t\t// // auto relogin\n\t\t\t\t// client.reconnect(() => handleLogin())\n\t\t\t})\n\t\t}\n\t\t//localStorage.getItem('password')\n\t\tif (!isPresenter) return (\n\t\t\t<div style={{ textAlign: 'center' }}>\n\t\t\t\t<h3>Please enter password to login</h3>\n\t\t\t\t<form onSubmit={handleLogin}>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tonChange={e => setPassword(e.target.value)}\n\t\t\t\t\t\tplaceholder='Enter password'\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpadding: '10px 15px',\n\t\t\t\t\t\t\tborderRadius: 3,\n\t\t\t\t\t\t\tborder: '1px solid grey'\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tstyle={styles.button}\n\t\t\t\t\t\t\tonClick={handleLogin}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tLogin as presenter\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tstyle={styles.button}\n\t\t\t\t\t\t\tonClick={e => e.preventDefault() | setIsPresenter(false)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tView Only\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div >\n\t\t)\n\t\thandleLogin()\n\t}\n\treturn (\n\t\t<div>\n\t\t\t{password}\n\t\t\t{slides}\n\t\t\t<img {...{\n\t\t\t\tsrc: `./slides/${slideIndex}.png`,\n\t\t\t\tstyle: { width: '100%' },\n\t\t\t\talt: '',\n\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t)\n}\n\nconst styles = {\n\tbutton: {\n\t\tbackground: '#dadada',\n\t\tcursor: 'pointer',\n\t\tfontWeight: 'bold',\n\t\tpadding: '10px 15px',\n\t}\n}\n\n// getUrlParam reads the URL parameters\n//\n// Params:\n// @name    string: (optional) if supplied will return a specific paramenter as string.\n//                  Otherwise, will return an object containing all the URL parameters with respective values.\n//\n// returns  string/object\nfunction getUrlParam(name) {\n\tconst params = {}\n\tconst regex = /[?&]+([^=&]+)=([^&]*)/gi\n\twindow.location.href.replace(regex, (_, key, value) => params[key] = value)\n\treturn name ? params[name] || '' : params\n}"]},"metadata":{},"sourceType":"module"}